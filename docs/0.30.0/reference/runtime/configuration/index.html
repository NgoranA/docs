<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-0.30.0 plugin-docs plugin-id-default docs-doc-id-reference/runtime/configuration">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Configuration | Platformatic Open Source Software</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.platformatic.dev/docs/0.30.0/reference/runtime/configuration"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="0.30.0"><meta data-rh="true" name="docusaurus_tag" content="docs-default-0.30.0"><meta data-rh="true" name="docsearch:version" content="0.30.0"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-0.30.0"><meta data-rh="true" property="og:title" content="Configuration | Platformatic Open Source Software"><meta data-rh="true" name="description" content="Platformatic Runtime is configured with a configuration file. It supports the"><meta data-rh="true" property="og:description" content="Platformatic Runtime is configured with a configuration file. It supports the"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.platformatic.dev/docs/0.30.0/reference/runtime/configuration"><link data-rh="true" rel="alternate" href="https://docs.platformatic.dev/docs/0.30.0/reference/runtime/configuration" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.platformatic.dev/docs/0.30.0/reference/runtime/configuration" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Platformatic Open Source Software RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Platformatic Open Source Software Atom Feed"><link rel="stylesheet" href="/assets/css/styles.2daad330.css">
<link rel="preload" href="/assets/js/runtime~main.0bc533dd.js" as="script">
<link rel="preload" href="/assets/js/main.4edf26f4.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/plt-logo.svg" alt="Platformatic Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/plt-logo-inverted.svg" alt="Platformatic Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Platformatic</b></a><a class="navbar__item navbar__link" href="/docs/0.30.0/getting-started/quick-start-guide">Get Started</a><a class="navbar__item navbar__link" href="/docs/category/guides">Guides</a><a class="navbar__item navbar__link" href="/docs/category/reference">Reference</a><a class="navbar__item navbar__link" href="/docs/category/platformatic-cloud">Platformatic Cloud</a><a href="https://blog.platformatic.dev" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://www.platformatic.dev" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">About<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/0.30.0/getting-started/quick-start-guide">0.30.0</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next/reference/runtime/configuration">Next</a></li><li><a class="dropdown__link" href="/docs/reference/runtime/configuration">0.36.0</a></li><li><a class="dropdown__link" href="/docs/0.35.5/reference/runtime/configuration">0.35.5</a></li><li><a class="dropdown__link" href="/docs/0.35.4/reference/runtime/configuration">0.35.4</a></li><li><a class="dropdown__link" href="/docs/0.35.3/reference/runtime/configuration">0.35.3</a></li><li><a class="dropdown__link" href="/docs/0.35.2/reference/runtime/configuration">0.35.2</a></li><li><a class="dropdown__link" href="/docs/0.35.1/reference/runtime/configuration">0.35.1</a></li><li><a class="dropdown__link" href="/docs/0.35.0/reference/runtime/configuration">0.35.0</a></li><li><a class="dropdown__link" href="/docs/0.34.1/reference/runtime/configuration">0.34.1</a></li><li><a class="dropdown__link" href="/docs/0.34.0/reference/runtime/configuration">0.34.0</a></li><li><a class="dropdown__link" href="/docs/0.33.1/reference/runtime/configuration">0.33.1</a></li><li><a class="dropdown__link" href="/docs/0.32.0/reference/runtime/configuration">0.32.0</a></li><li><a class="dropdown__link" href="/docs/0.31.1/reference/runtime/configuration">0.31.1</a></li><li><a class="dropdown__link" href="/docs/0.31.0/reference/runtime/configuration">0.31.0</a></li><li><a class="dropdown__link" href="/docs/0.30.1/reference/runtime/configuration">0.30.1</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/0.30.0/reference/runtime/configuration">0.30.0</a></li><li><a class="dropdown__link" href="/docs/0.29.0/reference/runtime/configuration">0.29.0</a></li><li><a class="dropdown__link" href="/docs/0.28.1/reference/runtime/configuration">0.28.1</a></li><li><a class="dropdown__link" href="/docs/0.27.0/reference/runtime/configuration">0.27.0</a></li><li><a class="dropdown__link" href="/docs/0.26.1/reference/runtime/configuration">0.26.1</a></li><li><a class="dropdown__link" href="/docs/0.26.0/reference/runtime/configuration">0.26.0</a></li><li><a class="dropdown__link" href="/docs/0.25.0/getting-started/quick-start-guide">0.25.0</a></li><li><a class="dropdown__link" href="/docs/0.23.2/getting-started/quick-start-guide">0.23.2</a></li><li><a class="dropdown__link" href="/docs/0.23.1/getting-started/quick-start-guide">0.23.1</a></li><li><a class="dropdown__link" href="/docs/0.23.0/getting-started/quick-start-guide">0.23.0</a></li><li><a class="dropdown__link" href="/docs/0.22.0/getting-started/quick-start-guide">0.22.0</a></li><li><a class="dropdown__link" href="/docs/0.21.1/getting-started/quick-start-guide">0.21.1</a></li><li><a class="dropdown__link" href="/docs/0.21.0/getting-started/quick-start-guide">0.21.0</a></li></ul></div><a href="https://github.com/platformatic" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><main class="docMainContainer_gTbr docMainContainerEnhanced_Uz_u"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->Platformatic Open Source Software<!-- --> <b>0.30.0</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/docs/reference/runtime/configuration">latest version</a></b> (<!-- -->0.36.0<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><span class="theme-doc-version-badge badge badge--secondary">Version: 0.30.0</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Configuration</h1><p>Platformatic Runtime is configured with a configuration file. It supports the
use of environment variables as setting values with <a href="#configuration-placeholders">configuration placeholders</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-file">Configuration file<a href="#configuration-file" class="hash-link" aria-label="Direct link to Configuration file" title="Direct link to Configuration file">​</a></h2><p>If the Platformatic CLI finds a file in the current working directory matching
one of these filenames, it will automatically load it:</p><ul><li><code>platformatic.runtime.json</code></li><li><code>platformatic.runtime.json5</code></li><li><code>platformatic.runtime.yml</code> or <code>platformatic.runtime.yaml</code></li><li><code>platformatic.runtime.tml</code> or <code>platformatic.runtime.toml</code></li></ul><p>Alternatively, a <a href="/docs/0.30.0/reference/cli#service"><code>--config</code> option</a> with a configuration
filepath can be passed to most <code>platformatic runtime</code> CLI commands.</p><p>The configuration examples in this reference use JSON.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="supported-formats">Supported formats<a href="#supported-formats" class="hash-link" aria-label="Direct link to Supported formats" title="Direct link to Supported formats">​</a></h3><table><thead><tr><th align="left">Format</th><th align="left">Extensions</th></tr></thead><tbody><tr><td align="left">JSON</td><td align="left"><code>.json</code></td></tr><tr><td align="left">JSON5</td><td align="left"><code>.json5</code></td></tr><tr><td align="left">YAML</td><td align="left"><code>.yml</code>, <code>.yaml</code></td></tr><tr><td align="left">TOML</td><td align="left"><code>.tml</code></td></tr></tbody></table><p>Comments are supported by the JSON5, YAML and TOML file formats.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="settings">Settings<a href="#settings" class="hash-link" aria-label="Direct link to Settings" title="Direct link to Settings">​</a></h2><p>Configuration settings are organized into the following groups:</p><ul><li><a href="#autoload"><code>autoload</code></a></li><li><a href="#services"><code>services</code></a></li><li><a href="#entrypoint"><code>entrypoint</code></a> <strong>(required)</strong></li><li><a href="#hotReload"><code>hotReload</code></a></li><li><a href="#allowCycles"><code>allowCycles</code></a></li></ul><p>Configuration settings containing sensitive data should be set using
<a href="#configuration-placeholders">configuration placeholders</a>.</p><p>The <code>autoload</code> and <code>services</code> settings can be used together, but at least one
of them must be provided. When the configuration file is parsed, <code>autoload</code>
configuration is translated into <code>services</code> configuration.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="autoload"><code>autoload</code><a href="#autoload" class="hash-link" aria-label="Direct link to autoload" title="Direct link to autoload">​</a></h3><p>The <code>autoload</code> configuration is intended to be used with monorepo applications.
<code>autoload</code> is an object with the following settings:</p><ul><li><strong><code>path</code></strong> (<strong>required</strong>, <code>string</code>) - The path to a directory containing the
microservices to load. In a traditional monorepo application, this directory is
typically named <code>packages</code>.</li><li><strong><code>exclude</code></strong> (<code>array</code> of <code>string</code>s) - Child directories inside of <code>path</code> that
should not be processed.</li><li><strong><code>mappings</code></strong> (<code>object</code>) - Each microservice is given an ID and is expected
to have a Platformatic configuration file. By default the ID is the
microservice&#x27;s directory name, and the configuration file is expected to be a
well-known Platformatic configuration file. <code>mappings</code> can be used to override
these default values.<ul><li><strong><code>id</code></strong> (<strong>required</strong>, <code>string</code>) - The overridden ID. This becomes the new
microservice ID.</li><li><strong><code>config</code> (</strong>required**, <code>string</code>) - The overridden configuration file
name. This is the file that will be used when starting the microservice.</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="services"><code>services</code><a href="#services" class="hash-link" aria-label="Direct link to services" title="Direct link to services">​</a></h3><p><code>services</code> is an array of objects that defines the microservices managed by the
runtime. Each service object supports the following settings:</p><ul><li><strong><code>id</code></strong> (<strong>required</strong>, <code>string</code>) - A unique identifier for the microservice.
When working with the Platformatic Composer, this value corresponds to the <code>id</code>
property of each object in the <code>services</code> section of the config file. When
working with client objects, this corresponds to the optional <code>serviceId</code>
property or the <code>name</code> field in the client&#x27;s <code>package.json</code> file if a
<code>serviceId</code> is not explicitly provided.</li><li><strong><code>path</code></strong> (<strong>required</strong>, <code>string</code>) - The path to the directory containing
the microservice.</li><li><strong><code>config</code></strong> (<strong>required</strong>, <code>string</code>) - The configuration file used to start
the microservice.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="entrypoint"><code>entrypoint</code><a href="#entrypoint" class="hash-link" aria-label="Direct link to entrypoint" title="Direct link to entrypoint">​</a></h3><p>The Platformatic Runtime&#x27;s entrypoint is a microservice that is exposed
publicly. This value must be the ID of a service defined via the <code>autoload</code> or
<code>services</code> configuration.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="hotreload"><code>hotReload</code><a href="#hotreload" class="hash-link" aria-label="Direct link to hotreload" title="Direct link to hotreload">​</a></h3><p>An optional boolean, defaulting to <code>false</code>, indicating if hot reloading should
be enabled for the runtime. If this value is set to <code>false</code>, it will disable
hot reloading for any microservices managed by the runtime. If this value is
<code>true</code>, hot reloading for individual microservices is managed by the
configuration of that microservice.</p><div class="theme-admonition theme-admonition-warning alert alert--danger admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_S0QG"><p>While hot reloading is useful for development, it is not recommended for use in
production.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="allowcycles"><code>allowCycles</code><a href="#allowcycles" class="hash-link" aria-label="Direct link to allowcycles" title="Direct link to allowcycles">​</a></h3><p>An optional boolean, defaulting to <code>false</code>, indicating if dependency cycles
are allowed between microservices managed by the runtime. When the Platformatic
Runtime parses the provided configuration, it examines the clients of each
microservice, as well as the services of Platformatic Composer applications to
build a dependency graph. A topological sort is performed on this dependency
graph so that each service is started after all of its dependencies have been
started. If there are cycles, the topological sort fails and the Runtime does
not start any applications.</p><p>If <code>allowCycles</code> is <code>true</code>, the topological sort is skipped, and the
microservices are started in the order specified in the configuration file.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="environment-variable-placeholders">Environment variable placeholders<a href="#environment-variable-placeholders" class="hash-link" aria-label="Direct link to Environment variable placeholders" title="Direct link to Environment variable placeholders">​</a></h2><p>The value for any configuration setting can be replaced with an environment
variable by adding a placeholder in the configuration file, for example
<code>{PLT_ENTRYPOINT}</code>.</p><p>All placeholders in a configuration must be available as an environment
variable and must meet the
<a href="#allowed-placeholder-names">allowed placeholder name</a> rules.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="setting-environment-variables">Setting environment variables<a href="#setting-environment-variables" class="hash-link" aria-label="Direct link to Setting environment variables" title="Direct link to Setting environment variables">​</a></h3><p>If a <code>.env</code> file exists it will automatically be loaded by Platformatic using
<a href="https://github.com/motdotla/dotenv" target="_blank" rel="noopener noreferrer"><code>dotenv</code></a>. For example:</p><div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">.env</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">PLT_ENTRYPOINT=service</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <code>.env</code> file must be located in the same folder as the Platformatic
configuration file or in the current working directory.</p><p>Environment variables can also be set directly on the commmand line, for example:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token assign-left variable" style="color:#36acaa">PLT_ENTRYPOINT</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">service npx platformatic runtime</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="allowed-placeholder-names">Allowed placeholder names<a href="#allowed-placeholder-names" class="hash-link" aria-label="Direct link to Allowed placeholder names" title="Direct link to Allowed placeholder names">​</a></h3><p>Only placeholder names prefixed with <code>PLT_</code>, or that are in this allow list,
will be dynamically replaced in the configuration file:</p><ul><li><code>PORT</code></li><li><code>DATABASE_URL</code></li></ul><p>This restriction is to avoid accidentally exposing system environment variables.
An error will be raised by Platformatic if it finds a configuration placeholder
that isn&#x27;t allowed.</p><p>The default allow list can be extended by passing a <code>--allow-env</code> CLI option
with a comma separated list of strings, for example:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npx platformatic runtime --allow-env</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">HOST,SERVER_LOGGER_LEVEL</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If <code>--allow-env</code> is passed as an option to the CLI, it will be merged with the
default allow list.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="interservice-communication">Interservice communication<a href="#interservice-communication" class="hash-link" aria-label="Direct link to Interservice communication" title="Direct link to Interservice communication">​</a></h2><p>The Platformatic Runtime allows multiple microservice applications to run
within a single process. Only the entrypoint binds to an operating system
port and can be reached from outside of the runtime.</p><p>Within the runtime, all interservice communication happens by injecting HTTP
requests into the running servers, without binding them to ports. This injection
is handled by
<a href="https://www.npmjs.com/package/fastify-undici-dispatcher" target="_blank" rel="noopener noreferrer"><code>fastify-undici-dispatcher</code></a>.</p><p>Each microservice is assigned an internal domain name based on its unique ID.
For example, a microservice with the ID <code>awesome</code> is given the internal domain
of <code>http://awesome.plt.local</code>. The <code>fastify-undici-dispatcher</code> module maps that
domain to the Fastify server running the <code>awesome</code> microservice. Any Node.js
APIs based on Undici, such as <code>fetch()</code>, will then automatically route requests
addressed to <code>awesome.plt.local</code> to the corresponding Fastify server.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/platformatic/oss/edit/main/versioned_docs/version-0.30.0/reference/runtime/configuration.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#configuration-file" class="table-of-contents__link toc-highlight">Configuration file</a><ul><li><a href="#supported-formats" class="table-of-contents__link toc-highlight">Supported formats</a></li></ul></li><li><a href="#settings" class="table-of-contents__link toc-highlight">Settings</a><ul><li><a href="#autoload" class="table-of-contents__link toc-highlight"><code>autoload</code></a></li><li><a href="#services" class="table-of-contents__link toc-highlight"><code>services</code></a></li><li><a href="#entrypoint" class="table-of-contents__link toc-highlight"><code>entrypoint</code></a></li><li><a href="#hotreload" class="table-of-contents__link toc-highlight"><code>hotReload</code></a></li><li><a href="#allowcycles" class="table-of-contents__link toc-highlight"><code>allowCycles</code></a></li></ul></li><li><a href="#environment-variable-placeholders" class="table-of-contents__link toc-highlight">Environment variable placeholders</a><ul><li><a href="#setting-environment-variables" class="table-of-contents__link toc-highlight">Setting environment variables</a></li><li><a href="#allowed-placeholder-names" class="table-of-contents__link toc-highlight">Allowed placeholder names</a></li></ul></li><li><a href="#interservice-communication" class="table-of-contents__link toc-highlight">Interservice communication</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started/quick-start-guide">Get Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/category/guides">Guides</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/category/reference">Reference</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.gg/platformatic" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/platformatic" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://blog.platformatic.dev" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.platformatic.dev" target="_blank" rel="noopener noreferrer" class="footer__link-item">Main website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/platformatic" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Platformatic, Inc.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.0bc533dd.js"></script>
<script src="/assets/js/main.4edf26f4.js"></script>
</body>
</html>